" VIM CONFIGURATION

" Modularised configuration
" shared between Linux, Windows, Android, vim, gvim and nvim.

" Source standard defaults
source $VIMRUNTIME/defaults.vim

" Set $VIMFILES variable
if has('unix')
  let $VIMFILES = $HOME . '/.config/vim'
elseif has('win32')
  let $VIMFILES = $HOME . '/vimfiles'
endif

" Source configuration files
source $VIMFILES/vimrc.d/xdg.vim        " Add XDG directories to vim and share with nvim
source $VIMFILES/vimrc.d/autocmds.vim   " Auto commands dependent on filetype
source $VIMFILES/vimrc.d/opts.vim       " Setting options
source $VIMFILES/vimrc.d/mappings.vim   " Key mappings
source $VIMFILES/vimrc.d/plugins.vim    " Plugins and plugin configuration

" Set vim colour scheme
if !has('gui_running')
  colorscheme sonokai
  set background=dark
  " Change cursor depending on mode, like in nvim
  let &t_SI = "\e[6 q"
  let &t_SR = "\e[4 q"
  let &t_EI = "\e[2 q"
  let &t_ti ..= "\e[1 q"
  let &t_te ..= "\e[0 q"
endif

" Colour scheme setting generated by shell configuration
if filereadable(expand('$VIMFILES/vimrc.d/colorscheme.vim'))
  source $VIMFILES/vimrc.d/colorscheme.vim
endif

" Set a blue colour scheme if I'm
" using PowerShell for some variety
if $MYSHELL ==# 'powershell'
  colorscheme blue-mood
  let g:lightline = {
      \ 'colorscheme': 'blue_mood',
      \ }
endif
